{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/tony_niu/Visual Studio/Twilio/twilio-video-starter-kit/src/App.js\";\nimport './App.scss';\nimport React, { Component } from 'react';\nimport Room from './Room';\n\nconst AccessToken = require('twilio').jwt.AccessToken;\n\nconst VideoGrant = AccessToken.VideoGrant; // Used when generating any kind of tokens\n// To set up environmental variables, see http://twil.io/secure\n\nconst twilioAccountSid = \"AC76db11bbcac3bdaf7a668f273a7b3dce\";\nconst twilioApiKey = \"SK213e44cf59f538c0a5744d10073a3709\";\nconst twilioApiSecret = \"9uHtzwCGJZzz7FVEBasHgyROuVdZtjnD\";\nconst identity = ''; // Create Video Grant\n\nconst videoGrant = new VideoGrant({\n  room: 'cool room'\n}); // Create an access token which we will sign and return to the client,\n// containing the grant we just created\n\nconst token = new AccessToken(twilioAccountSid, twilioApiKey, twilioApiSecret, {\n  identity: identity\n});\ntoken.addGrant(videoGrant); // Serialize the token to a JWT string\n\nconsole.log(token.toJwt());\n\nconst {\n  connect\n} = require('twilio-video');\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      identity: '',\n      // identity changes when a user enters their name\n      room: null // null -> user is not part of a video room and they will be shown the lobby screen \n\n    };\n    this.inputRef = /*#__PURE__*/React.createRef();\n    this.joinRoom = this.joinRoom.bind(this);\n    this.returnToLobby = this.returnToLobby.bind(this);\n    this.updateIdentity = this.updateIdentity.bind(this);\n    this.removePlaceholderText = this.removePlaceholderText.bind(this);\n  }\n\n  async joinRoom() {\n    try {\n      // const response = await fetch(`https://token-service-3779-dev.twil.io/${token}?identity=${this.state.identity}`);\n      // const data = await response.json();\n      const room = await connect(token.toJwt(), {\n        name: 'cool-room',\n        audio: true,\n        video: true\n      });\n      this.setState({\n        room: room\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  returnToLobby() {\n    this.setState({\n      room: null\n    });\n  }\n\n  removePlaceholderText() {\n    this.inputRef.current.placeholder = '';\n  }\n\n  updateIdentity(event) {\n    this.setState({\n      identity: event.target.value\n    });\n  }\n\n  render() {\n    const disabled = this.state.identity === '' ? true : false;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: this.state.room === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lobby\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: this.state.identity,\n          onChange: this.updateIdentity,\n          ref: this.inputRef,\n          onClick: this.removePlaceholderText,\n          placeholder: \"What's your name?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: disabled,\n          onClick: this.joinRoom,\n          children: \"Join Room\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(Room, {\n        returnToLobby: this.returnToLobby,\n        room: this.state.room\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/tony_niu/Visual Studio/Twilio/twilio-video-starter-kit/src/App.js"],"names":["React","Component","Room","AccessToken","require","jwt","VideoGrant","twilioAccountSid","twilioApiKey","twilioApiSecret","identity","videoGrant","room","token","addGrant","console","log","toJwt","connect","App","constructor","props","state","inputRef","createRef","joinRoom","bind","returnToLobby","updateIdentity","removePlaceholderText","name","audio","video","setState","err","current","placeholder","event","target","value","render","disabled"],"mappings":"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","sourcesContent":["import './App.scss';\nimport React, {Component} from 'react';\nimport Room from './Room';\n\n\n\nconst AccessToken = require('twilio').jwt.AccessToken;\nconst VideoGrant = AccessToken.VideoGrant;\n\n// Used when generating any kind of tokens\n// To set up environmental variables, see http://twil.io/secure\nconst twilioAccountSid = \"AC76db11bbcac3bdaf7a668f273a7b3dce\";\nconst twilioApiKey = \"SK213e44cf59f538c0a5744d10073a3709\";\nconst twilioApiSecret = \"9uHtzwCGJZzz7FVEBasHgyROuVdZtjnD\";\n\nconst identity = '';\n\n// Create Video Grant\nconst videoGrant = new VideoGrant({\n  room: 'cool room',\n});\n\n// Create an access token which we will sign and return to the client,\n// containing the grant we just created\nconst token = new AccessToken(\n  twilioAccountSid,\n  twilioApiKey,\n  twilioApiSecret,\n  {identity: identity}\n);\ntoken.addGrant(videoGrant);\n\n// Serialize the token to a JWT string\nconsole.log(token.toJwt());\n\n\n\n\n\nconst { connect } = require('twilio-video');\n\n\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n    \n        this.state = {\n          identity: '', // identity changes when a user enters their name\n          room: null // null -> user is not part of a video room and they will be shown the lobby screen \n        }\n        this.inputRef = React.createRef();\n        this.joinRoom = this.joinRoom.bind(this);\n        this.returnToLobby = this.returnToLobby.bind(this);\n        this.updateIdentity = this.updateIdentity.bind(this);\n        this.removePlaceholderText = this.removePlaceholderText.bind(this);\n    }\n\n\n    async joinRoom() {\n        try {\n            // const response = await fetch(`https://token-service-3779-dev.twil.io/${token}?identity=${this.state.identity}`);\n            // const data = await response.json();\n            const room = await connect(token.toJwt(), {\n                name: 'cool-room',\n                audio: true,\n                video: true\n            });\n      \n          this.setState({ room: room });\n        } catch(err) {\n          console.log(err);\n        }\n      }\n    returnToLobby() {\n        this.setState({ room: null });\n    }\n\n    removePlaceholderText() {\n        this.inputRef.current.placeholder = '';\n    }\n      \n    updateIdentity(event) {\n        this.setState({\n          identity: event.target.value\n        });\n    }\n\n    render() {\n        const disabled = this.state.identity === '' ? true : false;\n    \n        return (\n        <div className=\"app\">\n            { \n              this.state.room === null\n              ? <div className=\"lobby\">\n                   <input \n                     value={this.state.identity} \n                     onChange={this.updateIdentity} \n                     ref={this.inputRef}\n                     onClick={this.removePlaceholderText} \n                     placeholder=\"What's your name?\"/>\n                     <button disabled={disabled} onClick={this.joinRoom}>Join Room</button>\n                </div>\n              : <Room returnToLobby={this.returnToLobby} room={this.state.room} />\n            }\n        </div>\n        );\n    }\n      \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}